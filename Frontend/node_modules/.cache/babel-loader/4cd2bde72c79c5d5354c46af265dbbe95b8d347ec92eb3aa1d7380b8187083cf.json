{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adith\\\\OneDrive\\\\Desktop\\\\IFN636_Assignment2\\\\Frontend\\\\src\\\\components\\\\Login.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Login({\n  onLogin\n}) {\n  _s();\n  const navigate = useNavigate();\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n  const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n  const handleSubmit = async e => {\n    e.preventDefault(); // prevent page refresh on form submit\n    setErrorMsg(\"\"); // reset any previous error\n    const base = process.env.REACT_APP_API_BASE_URL || \"http://localhost:5000\";\n    let payload;\n    try {\n      const res = await fetch(`${API_BASE}/api/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n        // credentials: \"include\"  // uncomment if using cookies for JWT\n      });\n      console.log(res);\n      const ct = res.headers.get(\"content-type\") || \"\";\n      payload = ct.includes(\"application/json\") ? await res.json() : {\n        message: await res.text()\n      };\n\n      // Optional debugging (safe because payload is defined now)\n      console.log(\"[login] status:\", res.status, \"| payload:\", payload);\n      if (!res.ok) {\n        // If HTTP status is not 200-299, handle error\n        const errorData = await res.json().catch(() => ({}));\n        const message = errorData.error || errorData.message || \"Failed to login.\";\n        setErrorMsg(message);\n        return;\n      }\n      onLogin(payload.user, payload.token);\n      navigate(\"/dashboard\", {\n        replace: true\n      });\n      // Parse successful response\n      const data = await res.json();\n      // TODO: handle successful login (e.g., save token, redirect)\n      console.log(\"Login successful!\", data);\n    } catch (err) {\n      // Handle network or parsing errors\n      console.error(\"Network error:\", err);\n      setErrorMsg(\"Unable to connect to the server. Please try again.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container min-vh-100 d-flex align-items-center justify-content-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"col-11 col-sm-9 col-md-7 col-lg-5\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card shadow-sm p-4 fade-in-down\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center mb-3\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          className: \"needs-validation\",\n          noValidate: true,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 62,\n              columnNumber: 3\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"form-control\",\n              id: \"loginEmail\",\n              value: email,\n              onChange: e => setEmail(e.target.value),\n              placeholder: \"Enter your email\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 63,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"mb-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"form-label\",\n              children: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 3\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"password\",\n              className: \"form-control\",\n              id: \"loginPassword\",\n              value: password,\n              onChange: e => setPassword(e.target.value),\n              placeholder: \"Enter your password\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 3\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 1\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary w-100\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), errorMsg && /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"alert alert-danger mt-3 mb-0\",\n            children: errorMsg\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 26\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-center mt-3 mb-0\",\n          children: [\"Don\\u2019t have an account? \", /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/register\",\n            className: \"fw-semibold\",\n            children: \"REGISTER\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 36\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(Login, \"z4hpHyIPImW69+wRVQi0K7MyVK0=\", false, function () {\n  return [useNavigate];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useNavigate","Link","jsxDEV","_jsxDEV","Login","onLogin","_s","navigate","email","setEmail","password","setPassword","errorMsg","setErrorMsg","API_BASE","process","env","REACT_APP_API_URL","handleSubmit","e","preventDefault","base","REACT_APP_API_BASE_URL","payload","res","fetch","method","headers","body","JSON","stringify","console","log","ct","get","includes","json","message","text","status","ok","errorData","catch","error","user","token","replace","data","err","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","noValidate","type","id","value","onChange","target","placeholder","required","to","_c","$RefreshReg$"],"sources":["C:/Users/adith/OneDrive/Desktop/IFN636_Assignment2/Frontend/src/components/Login.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { Link } from \"react-router-dom\";\n\nfunction Login({ onLogin }) {\n  const navigate = useNavigate(); \n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [errorMsg, setErrorMsg] = useState(\"\");\n\n  const API_BASE = process.env.REACT_APP_API_URL || \"http://localhost:5000\";\n  const handleSubmit = async (e) => {\n    e.preventDefault();  // prevent page refresh on form submit\n    setErrorMsg(\"\");     // reset any previous error\n    const base = process.env.REACT_APP_API_BASE_URL || \"http://localhost:5000\";\n    let payload;\n    try {\n      const res = await fetch(`${API_BASE}/api/auth/login`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({ email, password }),\n        // credentials: \"include\"  // uncomment if using cookies for JWT\n      });\n      console.log(res)\n      const ct = res.headers.get(\"content-type\") || \"\";\n      payload = ct.includes(\"application/json\")\n        ? await res.json()\n        : { message: await res.text() };\n\n      // Optional debugging (safe because payload is defined now)\n      console.log(\"[login] status:\", res.status, \"| payload:\", payload);\n      if (!res.ok) {\n        // If HTTP status is not 200-299, handle error\n        const errorData = await res.json().catch(() => ({}));\n        const message = errorData.error || errorData.message || \"Failed to login.\";\n        setErrorMsg(message);\n        return;\n      }\n      onLogin(payload.user, payload.token);\n      navigate(\"/dashboard\", { replace: true });\n      // Parse successful response\n      const data = await res.json();\n      // TODO: handle successful login (e.g., save token, redirect)\n      console.log(\"Login successful!\", data);\n    } catch (err) {\n      // Handle network or parsing errors\n      console.error(\"Network error:\", err);\n      setErrorMsg(\"Unable to connect to the server. Please try again.\");\n    }\n  };\n\n  return (\n\n    <div className=\"container min-vh-100 d-flex align-items-center justify-content-center\">\n      <div className=\"col-11 col-sm-9 col-md-7 col-lg-5\">\n        <div className=\"card shadow-sm p-4 fade-in-down\">\n          <h2 className=\"text-center mb-3\">Login</h2>\n          <form onSubmit={handleSubmit} className=\"needs-validation\" noValidate>\n           <div className=\"mb-3\">\n  <label className=\"form-label\">Email</label>\n  <input\n    type=\"email\"\n    className=\"form-control\"\n    id=\"loginEmail\"\n    value={email}\n    onChange={(e) => setEmail(e.target.value)}\n    placeholder=\"Enter your email\"\n    required\n  />\n</div>\n\n<div className=\"mb-3\">\n  <label className=\"form-label\">Password</label>\n  <input\n    type=\"password\"\n    className=\"form-control\"\n    id=\"loginPassword\"\n    value={password}\n    onChange={(e) => setPassword(e.target.value)}\n    placeholder=\"Enter your password\"\n    required\n  />\n</div>\n            <button type=\"submit\" className=\"btn btn-primary w-100\">Login</button>\n            {errorMsg && <p className=\"alert alert-danger mt-3 mb-0\">{errorMsg}</p>}\n          </form>\n          <p className=\"text-center mt-3 mb-0\">\n            Donâ€™t have an account? <Link to=\"/register\" className=\"fw-semibold\">REGISTER</Link>\n          </p>\n        </div>\n      </div>\n    </div>\n    \n);\n}\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}