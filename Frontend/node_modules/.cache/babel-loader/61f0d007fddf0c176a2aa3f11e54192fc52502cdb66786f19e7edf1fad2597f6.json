{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adith\\\\OneDrive\\\\Desktop\\\\IFN636_Assignment2\\\\Frontend\\\\src\\\\components\\\\ManagerDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\n\n/* ===== API paths that match your backend ===== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = {\n  shifts: {\n    list: \"/api/shifts\",\n    // GET\n    create: \"/api/shifts/assign\",\n    // POST (manager)\n    swapList: \"/api/shifts/swap-requests\",\n    // GET (manager/TL)\n    approveSwap: id => `/api/shifts/swap/${id}/approve` // PATCH (manager)\n  },\n  leaves: {\n    list: \"/api/leaves\",\n    // GET (filter pending client-side)\n    approveManager: id => `/api/leaves/${id}/approve-manager` // PATCH (manager)\n  },\n  users: {\n    list: \"/api/users\"\n  } // GET (manager)\n};\n\n/* Safely read a response as JSON or text */\nconst readBody = async res => {\n  const ct = res.headers.get(\"content-type\") || \"\";\n  if (ct.includes(\"application/json\")) {\n    try {\n      return await res.json();\n    } catch {\n      return null;\n    }\n  }\n  try {\n    return await res.text();\n  } catch {\n    return null;\n  }\n};\n\n/* Field candidates for robust rendering */\nconst NAME_FIELDS = [\"name\", \"fullName\", \"username\", \"email\", \"firstName\", \"lastName\"];\nconst NESTED_USER_KEYS = [\"user\", \"assignedTo\", \"employee\", \"owner\"];\nconst ID_KEYS = [\"userId\", \"assignedToId\", \"employeeId\", \"ownerId\"];\nconst DATE_KEYS = [\"date\", \"shiftDate\", \"startDate\", \"assignedDate\", \"scheduledFor\", \"day\", \"dayDate\"];\nconst TIME_KEYS = [\"startTime\", \"start\", \"from\"]; // in case a timestamp includes the date\n\nfunction ManagerDashboard() {\n  _s();\n  const [allShifts, setAllShifts] = useState([]);\n  const [pendingLeaves, setPendingLeaves] = useState([]);\n  const [pendingSwaps, setPendingSwaps] = useState([]);\n  const [newShift, setNewShift] = useState({\n    userId: \"\",\n    date: \"\"\n  });\n  const [allUsers, setAllUsers] = useState([]);\n  const BASE = process.env.REACT_APP_API_BASE_URL || \"\"; // or use CRA proxy\n\n  /* Normalize users to array and build id->name map */\n  const usersArray = useMemo(() => Array.isArray(allUsers) ? allUsers : Array.isArray(allUsers === null || allUsers === void 0 ? void 0 : allUsers.users) ? allUsers.users : [], [allUsers]);\n  const userMap = useMemo(() => {\n    const m = {};\n    for (const u of usersArray) {\n      const n = NAME_FIELDS.map(k => u === null || u === void 0 ? void 0 : u[k]).find(Boolean) || \"User\";\n      if (u !== null && u !== void 0 && u._id) m[u._id] = n;\n      if (u !== null && u !== void 0 && u.id) m[u.id] = n; // just in case\n    }\n    return m;\n  }, [usersArray]);\n  const shortId = val => typeof val === \"string\" && val.length > 8 ? ` (${val.slice(-6)})` : \"\";\n  const displayDate = obj => {\n    for (const k of DATE_KEYS) {\n      const v = obj === null || obj === void 0 ? void 0 : obj[k];\n      if (v) return new Date(v).toLocaleDateString();\n    }\n    for (const k of TIME_KEYS) {\n      const v = obj === null || obj === void 0 ? void 0 : obj[k];\n      if (v && typeof v === \"string\") {\n        const d = v.slice(0, 10);\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(d)) return new Date(d).toLocaleDateString();\n      }\n    }\n    return \"\";\n  };\n  const displayName = item => {\n    // 1) nested user-like object that carries a name\n    for (const key of NESTED_USER_KEYS) {\n      const obj = item === null || item === void 0 ? void 0 : item[key];\n      if (obj && typeof obj === \"object\") {\n        const n = NAME_FIELDS.map(k => obj === null || obj === void 0 ? void 0 : obj[k]).find(Boolean);\n        if (n) return n;\n        if (obj !== null && obj !== void 0 && obj._id && userMap[obj._id]) return userMap[obj._id];\n      }\n      if (typeof (item === null || item === void 0 ? void 0 : item[key]) === \"string\" && userMap[item[key]]) return userMap[item[key]];\n    }\n    // 2) id fields\n    for (const k of ID_KEYS) {\n      const id = item === null || item === void 0 ? void 0 : item[k];\n      if (id && userMap[id]) return userMap[id];\n      if (id) return `User${shortId(id)}`;\n    }\n    // 3) flat name props the API might send\n    const flat = [\"userName\", \"employeeName\", \"assignedToName\", \"createdByName\"].map(k => item === null || item === void 0 ? void 0 : item[k]).find(Boolean);\n    if (flat) return flat;\n    return \"User\";\n  };\n\n  /* ------- Load data ------- */\n  const loadAll = async () => {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const headers = {\n        Authorization: `Bearer ${t}`\n      };\n      const [shiftsRes, leavesRes, swapsRes, usersRes] = await Promise.all([fetch(`${BASE}${API.shifts.list}`, {\n        headers\n      }), fetch(`${BASE}${API.leaves.list}`, {\n        headers\n      }), fetch(`${BASE}${API.shifts.swapList}`, {\n        headers\n      }), fetch(`${BASE}${API.users.list}`, {\n        headers\n      })]);\n      const [shifts, leaves, swaps, users] = await Promise.all([readBody(shiftsRes), readBody(leavesRes), readBody(swapsRes), readBody(usersRes)]);\n      setAllShifts(Array.isArray(shifts) ? shifts : []);\n      setPendingLeaves((Array.isArray(leaves) ? leaves : []).filter(l => (l.status || \"\").toLowerCase() === \"pending\"));\n      setPendingSwaps(Array.isArray(swaps) ? swaps : []);\n      setAllUsers(Array.isArray(users) || users && Array.isArray(users.users) ? users : []);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n  useEffect(() => {\n    loadAll();\n  }, [BASE]); // no eslint directive needed\n\n  /* ------- Actions ------- */\n  const submitNewShift = async e => {\n    e.preventDefault();\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(`${BASE}${API.shifts.create}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${t}`,\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          userId: newShift.userId,\n          date: newShift.date\n        })\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Assign shift failed:\", res.status, body);\n        alert(body && body.message || (typeof body === \"string\" ? body : `Failed to assign shift (HTTP ${res.status})`));\n        return;\n      }\n\n      // Re-fetch so the new row includes proper name/date from server\n      setNewShift({\n        userId: \"\",\n        date: \"\"\n      });\n      await loadAll();\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to assign shift\");\n    }\n  };\n  const approveLeave = async id => {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(`${BASE}${API.leaves.approveManager(id)}`, {\n        method: \"PATCH\",\n        headers: {\n          Authorization: `Bearer ${t}`\n        }\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve leave failed:\", res.status, body);\n        alert(body && body.message || \"Failed to approve leave\");\n        return;\n      }\n      setPendingLeaves(prev => prev.filter(l => l._id !== id));\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve leave\");\n    }\n  };\n  const approveSwap = async id => {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(`${BASE}${API.shifts.approveSwap(id)}`, {\n        method: \"PATCH\",\n        headers: {\n          Authorization: `Bearer ${t}`\n        }\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve swap failed:\", res.status, body);\n        alert(body && body.message || \"Failed to approve swap\");\n        return;\n      }\n      setPendingSwaps(prev => prev.filter(s => s._id !== id));\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve swap\");\n    }\n  };\n\n  /* ------- UI ------- */\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-3 fw-bold\",\n      children: \"Manager Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-grid gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"All Shifts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-unstyled d-grid gap-2\",\n          children: allShifts.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\",\n            children: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: [displayName(s), \" \\u2014 \", displayDate(s)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 17\n            }, this)\n          }, s._id || `${displayName(s)}-${displayDate(s)}`, false, {\n            fileName: _jsxFileName,\n            lineNumber: 230,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"Assign New Shift\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-2\",\n          onSubmit: submitNewShift,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 col-sm-6\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: newShift.userId,\n              onChange: e => setNewShift({\n                ...newShift,\n                userId: e.target.value\n              }),\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select user...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 17\n              }, this), usersArray.map(u => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: u._id || u.id,\n                children: NAME_FIELDS.map(k => u === null || u === void 0 ? void 0 : u[k]).find(Boolean) || (u === null || u === void 0 ? void 0 : u.email) || \"User\"\n              }, u._id || u.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 col-sm-6\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"form-control\",\n              value: newShift.date,\n              onChange: e => setNewShift({\n                ...newShift,\n                date: e.target.value\n              }),\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 262,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 d-flex justify-content-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              children: \"Assign Shift\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 271,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"Pending Leave Approvals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-unstyled d-grid gap-2\",\n          children: pendingLeaves.map(l => {\n            var _l$startDate, _l$endDate;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [displayName(l), \": \", (_l$startDate = l.startDate) === null || _l$startDate === void 0 ? void 0 : _l$startDate.substring(0, 10), \" to \", (_l$endDate = l.endDate) === null || _l$endDate === void 0 ? void 0 : _l$endDate.substring(0, 10), \" \\u2014 \", l.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 287,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-sm btn-primary\",\n                  onClick: () => approveLeave(l._id),\n                  children: \"Approve\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 290,\n                columnNumber: 17\n              }, this)]\n            }, l._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 15\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"Pending Swap Approvals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-unstyled d-grid gap-2\",\n          children: pendingSwaps.map(s => /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              children: [\"Swap between \", displayName(s.initiator || {\n                userId: s.initiatorId\n              }), \" and \", displayName(s.target || {\n                userId: s.targetId\n              }), \" (\", displayDate(s.initiatorShift || {}), \"  &&  \", displayDate(s.targetShift || {}), \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex gap-2\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"btn btn-sm btn-primary\",\n                onClick: () => approveSwap(s._id),\n                children: \"Approve\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 17\n            }, this)]\n          }, s._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 221,\n    columnNumber: 5\n  }, this);\n}\n_s(ManagerDashboard, \"JfcjW/gvVw8FH+T44d39A2BSOdo=\");\n_c = ManagerDashboard;\nexport default ManagerDashboard;\nvar _c;\n$RefreshReg$(_c, \"ManagerDashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","jsxDEV","_jsxDEV","API","shifts","list","create","swapList","approveSwap","id","leaves","approveManager","users","readBody","res","ct","headers","get","includes","json","text","NAME_FIELDS","NESTED_USER_KEYS","ID_KEYS","DATE_KEYS","TIME_KEYS","ManagerDashboard","_s","allShifts","setAllShifts","pendingLeaves","setPendingLeaves","pendingSwaps","setPendingSwaps","newShift","setNewShift","userId","date","allUsers","setAllUsers","BASE","process","env","REACT_APP_API_BASE_URL","usersArray","Array","isArray","userMap","m","u","n","map","k","find","Boolean","_id","shortId","val","length","slice","displayDate","obj","v","Date","toLocaleDateString","d","test","displayName","item","key","flat","loadAll","t","localStorage","getItem","Authorization","shiftsRes","leavesRes","swapsRes","usersRes","Promise","all","fetch","swaps","filter","l","status","toLowerCase","e","console","error","submitNewShift","preventDefault","method","Accept","body","JSON","stringify","ok","alert","message","err","approveLeave","prev","s","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","value","onChange","target","required","email","type","_l$startDate","_l$endDate","startDate","substring","endDate","onClick","initiator","initiatorId","targetId","initiatorShift","targetShift","_c","$RefreshReg$"],"sources":["C:/Users/adith/OneDrive/Desktop/IFN636_Assignment2/Frontend/src/components/ManagerDashboard.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\n\n/* ===== API paths that match your backend ===== */\nconst API = {\n  shifts: {\n    list: \"/api/shifts\",                         // GET\n    create: \"/api/shifts/assign\",                // POST (manager)\n    swapList: \"/api/shifts/swap-requests\",       // GET (manager/TL)\n    approveSwap: (id) => `/api/shifts/swap/${id}/approve`, // PATCH (manager)\n  },\n  leaves: {\n    list: \"/api/leaves\",                         // GET (filter pending client-side)\n    approveManager: (id) => `/api/leaves/${id}/approve-manager`, // PATCH (manager)\n  },\n  users: { list: \"/api/users\" },                 // GET (manager)\n};\n\n/* Safely read a response as JSON or text */\nconst readBody = async (res) => {\n  const ct = res.headers.get(\"content-type\") || \"\";\n  if (ct.includes(\"application/json\")) {\n    try { return await res.json(); } catch { return null; }\n  }\n  try { return await res.text(); } catch { return null; }\n};\n\n/* Field candidates for robust rendering */\nconst NAME_FIELDS = [\"name\", \"fullName\", \"username\", \"email\", \"firstName\", \"lastName\"];\nconst NESTED_USER_KEYS = [\"user\", \"assignedTo\", \"employee\", \"owner\"];\nconst ID_KEYS   = [\"userId\", \"assignedToId\", \"employeeId\", \"ownerId\"];\nconst DATE_KEYS = [\"date\", \"shiftDate\", \"startDate\", \"assignedDate\", \"scheduledFor\", \"day\", \"dayDate\"];\nconst TIME_KEYS = [\"startTime\", \"start\", \"from\"]; // in case a timestamp includes the date\n\nfunction ManagerDashboard() {\n  const [allShifts, setAllShifts] = useState([]);\n  const [pendingLeaves, setPendingLeaves] = useState([]);\n  const [pendingSwaps, setPendingSwaps] = useState([]);\n  const [newShift, setNewShift] = useState({ userId: \"\", date: \"\" });\n  const [allUsers, setAllUsers] = useState([]);\n\n  const BASE = process.env.REACT_APP_API_BASE_URL || \"\"; // or use CRA proxy\n\n  /* Normalize users to array and build id->name map */\n  const usersArray = useMemo(\n    () =>\n      Array.isArray(allUsers)\n        ? allUsers\n        : Array.isArray(allUsers?.users)\n        ? allUsers.users\n        : [],\n    [allUsers]\n  );\n\n  const userMap = useMemo(() => {\n    const m = {};\n    for (const u of usersArray) {\n      const n = NAME_FIELDS.map((k) => u?.[k]).find(Boolean) || \"User\";\n      if (u?._id) m[u._id] = n;\n      if (u?.id)  m[u.id]  = n; // just in case\n    }\n    return m;\n  }, [usersArray]);\n\n  const shortId = (val) =>\n    typeof val === \"string\" && val.length > 8 ? ` (${val.slice(-6)})` : \"\";\n\n  const displayDate = (obj) => {\n    for (const k of DATE_KEYS) {\n      const v = obj?.[k];\n      if (v) return new Date(v).toLocaleDateString();\n    }\n    for (const k of TIME_KEYS) {\n      const v = obj?.[k];\n      if (v && typeof v === \"string\") {\n        const d = v.slice(0, 10);\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(d)) return new Date(d).toLocaleDateString();\n      }\n    }\n    return \"\";\n  };\n\n  const displayName = (item) => {\n    // 1) nested user-like object that carries a name\n    for (const key of NESTED_USER_KEYS) {\n      const obj = item?.[key];\n      if (obj && typeof obj === \"object\") {\n        const n = NAME_FIELDS.map((k) => obj?.[k]).find(Boolean);\n        if (n) return n;\n        if (obj?._id && userMap[obj._id]) return userMap[obj._id];\n      }\n      if (typeof item?.[key] === \"string\" && userMap[item[key]]) return userMap[item[key]];\n    }\n    // 2) id fields\n    for (const k of ID_KEYS) {\n      const id = item?.[k];\n      if (id && userMap[id]) return userMap[id];\n      if (id) return `User${shortId(id)}`;\n    }\n    // 3) flat name props the API might send\n    const flat = [\"userName\", \"employeeName\", \"assignedToName\", \"createdByName\"]\n      .map((k) => item?.[k])\n      .find(Boolean);\n    if (flat) return flat;\n\n    return \"User\";\n  };\n\n  /* ------- Load data ------- */\n  const loadAll = async () => {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const headers = { Authorization: `Bearer ${t}` };\n\n      const [shiftsRes, leavesRes, swapsRes, usersRes] = await Promise.all([\n        fetch(`${BASE}${API.shifts.list}`, { headers }),\n        fetch(`${BASE}${API.leaves.list}`, { headers }),\n        fetch(`${BASE}${API.shifts.swapList}`, { headers }),\n        fetch(`${BASE}${API.users.list}`, { headers }),\n      ]);\n\n      const [shifts, leaves, swaps, users] = await Promise.all([\n        readBody(shiftsRes),\n        readBody(leavesRes),\n        readBody(swapsRes),\n        readBody(usersRes),\n      ]);\n\n      setAllShifts(Array.isArray(shifts) ? shifts : []);\n      setPendingLeaves(\n        (Array.isArray(leaves) ? leaves : []).filter(\n          (l) => (l.status || \"\").toLowerCase() === \"pending\"\n        )\n      );\n      setPendingSwaps(Array.isArray(swaps) ? swaps : []);\n      setAllUsers(Array.isArray(users) || (users && Array.isArray(users.users)) ? users : []);\n    } catch (e) {\n      console.error(e);\n    }\n  };\n\n  useEffect(() => {\n    loadAll();\n  }, [BASE]); // no eslint directive needed\n\n  /* ------- Actions ------- */\n  const submitNewShift = async (e) => {\n    e.preventDefault();\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(`${BASE}${API.shifts.create}`, {\n        method: \"POST\",\n        headers: {\n          Authorization: `Bearer ${t}`,\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n        body: JSON.stringify({ userId: newShift.userId, date: newShift.date }),\n      });\n\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Assign shift failed:\", res.status, body);\n        alert(\n          (body && body.message) ||\n            (typeof body === \"string\" ? body : `Failed to assign shift (HTTP ${res.status})`)\n        );\n        return;\n      }\n\n      // Re-fetch so the new row includes proper name/date from server\n      setNewShift({ userId: \"\", date: \"\" });\n      await loadAll();\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to assign shift\");\n    }\n  };\n\n  const approveLeave = async (id) => {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(`${BASE}${API.leaves.approveManager(id)}`, {\n        method: \"PATCH\",\n        headers: { Authorization: `Bearer ${t}` },\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve leave failed:\", res.status, body);\n        alert((body && body.message) || \"Failed to approve leave\");\n        return;\n      }\n      setPendingLeaves((prev) => prev.filter((l) => l._id !== id));\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve leave\");\n    }\n  };\n\n  const approveSwap = async (id) => {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(`${BASE}${API.shifts.approveSwap(id)}`, {\n        method: \"PATCH\",\n        headers: { Authorization: `Bearer ${t}` },\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve swap failed:\", res.status, body);\n        alert((body && body.message) || \"Failed to approve swap\");\n        return;\n      }\n      setPendingSwaps((prev) => prev.filter((s) => s._id !== id));\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve swap\");\n    }\n  };\n\n  /* ------- UI ------- */\n  return (\n    <div className=\"container py-3\">\n      <h2 className=\"mb-3 fw-bold\">Manager Dashboard</h2>\n\n      <div className=\"d-grid gap-3\">\n        {/* All Shifts */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">All Shifts</h3>\n          <ul className=\"list-unstyled d-grid gap-2\">\n            {allShifts.map((s) => (\n              <li\n                key={s._id || `${displayName(s)}-${displayDate(s)}`}\n                className=\"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\"\n              >\n                <span>\n                  {displayName(s)} — {displayDate(s)}\n                </span>\n              </li>\n            ))}\n          </ul>\n        </section>\n\n        {/* Assign New Shift */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">Assign New Shift</h3>\n          <form className=\"row g-2\" onSubmit={submitNewShift}>\n            <div className=\"col-12 col-sm-6\">\n              <select\n                className=\"form-select\"\n                value={newShift.userId}\n                onChange={(e) => setNewShift({ ...newShift, userId: e.target.value })}\n                required\n              >\n                <option value=\"\">Select user...</option>\n                {usersArray.map((u) => (\n                  <option key={u._id || u.id} value={u._id || u.id}>\n                    {NAME_FIELDS.map((k) => u?.[k]).find(Boolean) || u?.email || \"User\"}\n                  </option>\n                ))}\n              </select>\n            </div>\n            <div className=\"col-12 col-sm-6\">\n              <input\n                type=\"date\"\n                className=\"form-control\"\n                value={newShift.date}\n                onChange={(e) => setNewShift({ ...newShift, date: e.target.value })}\n                required\n              />\n            </div>\n            <div className=\"col-12 d-flex justify-content-end\">\n              <button type=\"submit\" className=\"btn btn-primary\">\n                Assign Shift\n              </button>\n            </div>\n          </form>\n        </section>\n\n        {/* Pending Leave Approvals */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">Pending Leave Approvals</h3>\n          <ul className=\"list-unstyled d-grid gap-2\">\n            {pendingLeaves.map((l) => (\n              <li\n                key={l._id}\n                className=\"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\"\n              >\n                <span>\n                  {displayName(l)}: {l.startDate?.substring(0, 10)} to {l.endDate?.substring(0, 10)} — {l.status}\n                </span>\n                <div className=\"d-flex gap-2\">\n                  <button\n                    className=\"btn btn-sm btn-primary\"\n                    onClick={() => approveLeave(l._id)}\n                  >\n                    Approve\n                  </button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </section>\n\n        {/* Pending Swap Approvals */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">Pending Swap Approvals</h3>\n          <ul className=\"list-unstyled d-grid gap-2\">\n            {pendingSwaps.map((s) => (\n              <li\n                key={s._id}\n                className=\"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\"\n              >\n                <span>\n                  Swap between {displayName(s.initiator || { userId: s.initiatorId })}\n                  {\" and \"}\n                  {displayName(s.target || { userId: s.targetId })}\n                  {\" (\"}\n                  {displayDate(s.initiatorShift || {})}\n                  {\"  &&  \"}\n                  {displayDate(s.targetShift || {})}\n                  {\")\"}\n                </span>\n                <div className=\"d-flex gap-2\">\n                  <button\n                    className=\"btn btn-sm btn-primary\"\n                    onClick={() => approveSwap(s._id)}\n                  >\n                    Approve\n                  </button>\n                </div>\n              </li>\n            ))}\n          </ul>\n        </section>\n      </div>\n    </div>\n  );\n}\n\nexport default ManagerDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}