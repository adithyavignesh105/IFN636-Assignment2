{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adith\\\\OneDrive\\\\Desktop\\\\IFN636_Assignment2\\\\Frontend\\\\src\\\\components\\\\ManagerDashboard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useMemo, useState } from \"react\";\n\n/* ==== API paths that match your backend ==== */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API = {\n  shifts: {\n    list: \"/api/shifts\",\n    // GET\n    create: \"/api/shifts/assign\",\n    // POST (manager)\n    swapList: \"/api/shifts/swap-requests\",\n    // GET (manager/TL)\n    approveSwap: function (id) {\n      return \"/api/shifts/swap/\" + id + \"/approve\";\n    } // PATCH\n  },\n  leaves: {\n    list: \"/api/leaves\",\n    // GET (filter pending client-side)\n    approveManager: function (id) {\n      return \"/api/leaves/\" + id + \"/approve-manager\";\n    } // PATCH\n  },\n  users: {\n    list: \"/api/users\"\n  } // GET (manager)\n};\n\n/* Safe body reader */\nasync function readBody(res) {\n  try {\n    const ct = res.headers.get(\"content-type\") || \"\";\n    if (ct.indexOf(\"application/json\") !== -1) return await res.json();\n    return await res.text();\n  } catch {\n    return null;\n  }\n}\nconst NAME_FIELDS = [\"name\", \"fullName\", \"username\", \"email\", \"firstName\", \"lastName\"];\nconst NESTED_USER_KEYS = [\"user\", \"assignedTo\", \"employee\", \"owner\"];\nconst ID_KEYS = [\"userId\", \"assignedToId\", \"employeeId\", \"ownerId\"];\nconst DATE_KEYS = [\"date\", \"shiftDate\", \"startDate\", \"assignedDate\", \"scheduledFor\", \"day\", \"dayDate\"];\nconst TIME_KEYS = [\"startTime\", \"start\", \"from\"];\nfunction ManagerDashboard() {\n  _s();\n  const [allShifts, setAllShifts] = useState([]);\n  const [pendingLeaves, setPendingLeaves] = useState([]);\n  const [pendingSwaps, setPendingSwaps] = useState([]);\n  const [newShift, setNewShift] = useState({\n    userId: \"\",\n    date: \"\"\n  });\n  const [allUsers, setAllUsers] = useState([]);\n  const BASE = process.env.REACT_APP_API_BASE_URL || \"\";\n  const usersArray = useMemo(function () {\n    if (Array.isArray(allUsers)) return allUsers;\n    if (allUsers && Array.isArray(allUsers.users)) return allUsers.users;\n    return [];\n  }, [allUsers]);\n  const userMap = useMemo(function () {\n    const m = {};\n    for (let i = 0; i < usersArray.length; i++) {\n      const u = usersArray[i];\n      let n = null;\n      for (let j = 0; j < NAME_FIELDS.length; j++) {\n        const f = NAME_FIELDS[j];\n        if (u && u[f]) {\n          n = u[f];\n          break;\n        }\n      }\n      if (!n) n = u && u.email || \"User\";\n      if (u && u._id) m[u._id] = n;\n      if (u && u.id) m[u.id] = n;\n    }\n    return m;\n  }, [usersArray]);\n  function displayDate(obj) {\n    for (let i = 0; i < DATE_KEYS.length; i++) {\n      const k = DATE_KEYS[i];\n      const v = obj && obj[k];\n      if (v) return new Date(v).toLocaleDateString();\n    }\n    for (let i = 0; i < TIME_KEYS.length; i++) {\n      const k = TIME_KEYS[i];\n      const v = obj && obj[k];\n      if (v && typeof v === \"string\") {\n        const d = v.slice(0, 10);\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(d)) return new Date(d).toLocaleDateString();\n      }\n    }\n    return \"\";\n  }\n  function displayName(item) {\n    for (let i = 0; i < NESTED_USER_KEYS.length; i++) {\n      const key = NESTED_USER_KEYS[i];\n      const val = item && item[key];\n      if (val && typeof val === \"object\") {\n        for (let j = 0; j < NAME_FIELDS.length; j++) {\n          const f = NAME_FIELDS[j];\n          if (val[f]) return val[f];\n        }\n        if (val._id && userMap[val._id]) return userMap[val._id];\n      }\n      if (typeof val === \"string\" && userMap[val]) return userMap[val];\n    }\n    for (let i = 0; i < ID_KEYS.length; i++) {\n      const k = ID_KEYS[i];\n      const id = item && item[k];\n      if (id && userMap[id]) return userMap[id];\n    }\n    const flat = item && (item.userName || item.employeeName || item.assignedToName || item.createdByName) || null;\n    if (flat) return flat;\n    return \"User\";\n  }\n  async function loadAll() {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const headers = {\n        Authorization: \"Bearer \" + t\n      };\n      const [shiftsRes, leavesRes, swapsRes, usersRes] = await Promise.all([fetch(BASE + API.shifts.list, {\n        headers\n      }), fetch(BASE + API.leaves.list, {\n        headers\n      }), fetch(BASE + API.shifts.swapList, {\n        headers\n      }), fetch(BASE + API.users.list, {\n        headers\n      })]);\n      const [shifts, leaves, swaps, users] = await Promise.all([readBody(shiftsRes), readBody(leavesRes), readBody(swapsRes), readBody(usersRes)]);\n      setAllShifts(Array.isArray(shifts) ? shifts : []);\n      const leavesArr = Array.isArray(leaves) ? leaves : [];\n      setPendingLeaves(leavesArr.filter(function (l) {\n        return l && l.status && String(l.status).toLowerCase() === \"pending\";\n      }));\n      setPendingSwaps(Array.isArray(swaps) ? swaps : []);\n      setAllUsers(Array.isArray(users) || users && Array.isArray(users.users) ? users : []);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  useEffect(function () {\n    loadAll();\n  }, []); // BASE normally static in CRA env; safe to omit\n\n  async function submitNewShift(e) {\n    e.preventDefault();\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(BASE + API.shifts.create, {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + t,\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\"\n        },\n        body: JSON.stringify({\n          userId: newShift.userId,\n          date: newShift.date\n        })\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Assign shift failed:\", res.status, body);\n        alert(body && body.message || (typeof body === \"string\" ? body : \"Failed to assign shift (HTTP \" + res.status + \")\"));\n        return;\n      }\n      setNewShift({\n        userId: \"\",\n        date: \"\"\n      });\n      await loadAll();\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to assign shift\");\n    }\n  }\n  async function approveLeave(id) {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(BASE + API.leaves.approveManager(id), {\n        method: \"PATCH\",\n        headers: {\n          Authorization: \"Bearer \" + t\n        }\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve leave failed:\", res.status, body);\n        alert(body && body.message || \"Failed to approve leave\");\n        return;\n      }\n      setPendingLeaves(function (prev) {\n        return prev.filter(function (l) {\n          return l._id !== id;\n        });\n      });\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve leave\");\n    }\n  }\n  async function approveSwap(id) {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(BASE + API.shifts.approveSwap(id), {\n        method: \"PATCH\",\n        headers: {\n          Authorization: \"Bearer \" + t\n        }\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve swap failed:\", res.status, body);\n        alert(body && body.message || \"Failed to approve swap\");\n        return;\n      }\n      setPendingSwaps(function (prev) {\n        return prev.filter(function (s) {\n          return s._id !== id;\n        });\n      });\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve swap\");\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container py-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"mb-3 fw-bold\",\n      children: \"Manager Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"d-grid gap-3\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"All Shifts\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-unstyled d-grid gap-2\",\n          children: allShifts.map(function (s, idx) {\n            const key = s && s._id ? s._id : \"shift-\" + idx;\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [displayName(s), \" \\u2014 \", displayDate(s)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 226,\n                columnNumber: 19\n              }, this)\n            }, key, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"Assign New Shift\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          className: \"row g-2\",\n          onSubmit: submitNewShift,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 col-sm-6\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              className: \"form-select\",\n              value: newShift.userId,\n              onChange: function (e) {\n                setNewShift({\n                  userId: e.target.value,\n                  date: newShift.date\n                });\n              },\n              required: true,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"Select user...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 17\n              }, this), usersArray.map(function (u) {\n                let label = u && (u.name || u.fullName || u.username || u.email) || \"User\";\n                return /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: u && (u._id || u.id) || \"\",\n                  children: label\n                }, u && (u._id || u.id) || label, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 21\n                }, this);\n              })]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 col-sm-6\",\n            children: /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"date\",\n              className: \"form-control\",\n              value: newShift.date,\n              onChange: function (e) {\n                setNewShift({\n                  userId: newShift.userId,\n                  date: e.target.value\n                });\n              },\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-12 d-flex justify-content-end\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary\",\n              children: \"Assign Shift\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"Pending Leave Approvals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-unstyled d-grid gap-2\",\n          children: pendingLeaves.map(function (l) {\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [displayName(l), \": \", ((l === null || l === void 0 ? void 0 : l.startDate) || \"\").toString().slice(0, 10), \" to \", ((l === null || l === void 0 ? void 0 : l.endDate) || \"\").toString().slice(0, 10), \" \\u2014 \", l === null || l === void 0 ? void 0 : l.status]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-sm btn-primary\",\n                  onClick: function () {\n                    approveLeave(l._id);\n                  },\n                  children: \"Approve\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 285,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 19\n              }, this)]\n            }, l._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"card shadow-sm p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"mb-3 text-primary fw-bold\",\n          children: \"Pending Swap Approvals\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"list-unstyled d-grid gap-2\",\n          children: pendingSwaps.map(function (s) {\n            const initiatorName = s.initiator ? displayName(s.initiator) : displayName({\n              userId: s.initiatorId\n            });\n            const targetName = s.target ? displayName(s.target) : displayName({\n              userId: s.targetId\n            });\n            const initDate = s.initiatorShift ? displayDate(s.initiatorShift) : \"\";\n            const targDate = s.targetShift ? displayDate(s.targetShift) : \"\";\n            return /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Swap between \", initiatorName, \" and \", targetName, \" (\", initDate, \"  &&  \", targDate, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex gap-2\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn btn-sm btn-primary\",\n                  onClick: function () {\n                    approveSwap(s._id);\n                  },\n                  children: \"Approve\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 313,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 19\n              }, this)]\n            }, s._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 211,\n    columnNumber: 5\n  }, this);\n}\n_s(ManagerDashboard, \"JfcjW/gvVw8FH+T44d39A2BSOdo=\");\n_c = ManagerDashboard;\nexport default ManagerDashboard;\nvar _c;\n$RefreshReg$(_c, \"ManagerDashboard\");","map":{"version":3,"names":["React","useEffect","useMemo","useState","jsxDEV","_jsxDEV","API","shifts","list","create","swapList","approveSwap","id","leaves","approveManager","users","readBody","res","ct","headers","get","indexOf","json","text","NAME_FIELDS","NESTED_USER_KEYS","ID_KEYS","DATE_KEYS","TIME_KEYS","ManagerDashboard","_s","allShifts","setAllShifts","pendingLeaves","setPendingLeaves","pendingSwaps","setPendingSwaps","newShift","setNewShift","userId","date","allUsers","setAllUsers","BASE","process","env","REACT_APP_API_BASE_URL","usersArray","Array","isArray","userMap","m","i","length","u","n","j","f","email","_id","displayDate","obj","k","v","Date","toLocaleDateString","d","slice","test","displayName","item","key","val","flat","userName","employeeName","assignedToName","createdByName","loadAll","t","localStorage","getItem","Authorization","shiftsRes","leavesRes","swapsRes","usersRes","Promise","all","fetch","swaps","leavesArr","filter","l","status","String","toLowerCase","e","console","error","submitNewShift","preventDefault","method","Accept","body","JSON","stringify","ok","alert","message","err","approveLeave","prev","s","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","idx","onSubmit","value","onChange","target","required","label","name","fullName","username","type","startDate","toString","endDate","onClick","initiatorName","initiator","initiatorId","targetName","targetId","initDate","initiatorShift","targDate","targetShift","_c","$RefreshReg$"],"sources":["C:/Users/adith/OneDrive/Desktop/IFN636_Assignment2/Frontend/src/components/ManagerDashboard.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from \"react\";\n\n/* ==== API paths that match your backend ==== */\nconst API = {\n  shifts: {\n    list: \"/api/shifts\",                         // GET\n    create: \"/api/shifts/assign\",                // POST (manager)\n    swapList: \"/api/shifts/swap-requests\",       // GET (manager/TL)\n    approveSwap: function (id) { return \"/api/shifts/swap/\" + id + \"/approve\"; }, // PATCH\n  },\n  leaves: {\n    list: \"/api/leaves\",                         // GET (filter pending client-side)\n    approveManager: function (id) { return \"/api/leaves/\" + id + \"/approve-manager\"; }, // PATCH\n  },\n  users: { list: \"/api/users\" },                 // GET (manager)\n};\n\n/* Safe body reader */\nasync function readBody(res) {\n  try {\n    const ct = res.headers.get(\"content-type\") || \"\";\n    if (ct.indexOf(\"application/json\") !== -1) return await res.json();\n    return await res.text();\n  } catch {\n    return null;\n  }\n}\n\nconst NAME_FIELDS = [\"name\", \"fullName\", \"username\", \"email\", \"firstName\", \"lastName\"];\nconst NESTED_USER_KEYS = [\"user\", \"assignedTo\", \"employee\", \"owner\"];\nconst ID_KEYS   = [\"userId\", \"assignedToId\", \"employeeId\", \"ownerId\"];\nconst DATE_KEYS = [\"date\", \"shiftDate\", \"startDate\", \"assignedDate\", \"scheduledFor\", \"day\", \"dayDate\"];\nconst TIME_KEYS = [\"startTime\", \"start\", \"from\"];\n\nfunction ManagerDashboard() {\n  const [allShifts, setAllShifts] = useState([]);\n  const [pendingLeaves, setPendingLeaves] = useState([]);\n  const [pendingSwaps, setPendingSwaps] = useState([]);\n  const [newShift, setNewShift] = useState({ userId: \"\", date: \"\" });\n  const [allUsers, setAllUsers] = useState([]);\n\n  const BASE = process.env.REACT_APP_API_BASE_URL || \"\";\n\n  const usersArray = useMemo(function () {\n    if (Array.isArray(allUsers)) return allUsers;\n    if (allUsers && Array.isArray(allUsers.users)) return allUsers.users;\n    return [];\n  }, [allUsers]);\n\n  const userMap = useMemo(function () {\n    const m = {};\n    for (let i = 0; i < usersArray.length; i++) {\n      const u = usersArray[i];\n      let n = null;\n      for (let j = 0; j < NAME_FIELDS.length; j++) {\n        const f = NAME_FIELDS[j];\n        if (u && u[f]) { n = u[f]; break; }\n      }\n      if (!n) n = (u && u.email) || \"User\";\n      if (u && u._id) m[u._id] = n;\n      if (u && u.id)  m[u.id]  = n;\n    }\n    return m;\n  }, [usersArray]);\n\n  function displayDate(obj) {\n    for (let i = 0; i < DATE_KEYS.length; i++) {\n      const k = DATE_KEYS[i];\n      const v = obj && obj[k];\n      if (v) return new Date(v).toLocaleDateString();\n    }\n    for (let i = 0; i < TIME_KEYS.length; i++) {\n      const k = TIME_KEYS[i];\n      const v = obj && obj[k];\n      if (v && typeof v === \"string\") {\n        const d = v.slice(0, 10);\n        if (/^\\d{4}-\\d{2}-\\d{2}$/.test(d)) return new Date(d).toLocaleDateString();\n      }\n    }\n    return \"\";\n  }\n\n  function displayName(item) {\n    for (let i = 0; i < NESTED_USER_KEYS.length; i++) {\n      const key = NESTED_USER_KEYS[i];\n      const val = item && item[key];\n      if (val && typeof val === \"object\") {\n        for (let j = 0; j < NAME_FIELDS.length; j++) {\n          const f = NAME_FIELDS[j];\n          if (val[f]) return val[f];\n        }\n        if (val._id && userMap[val._id]) return userMap[val._id];\n      }\n      if (typeof val === \"string\" && userMap[val]) return userMap[val];\n    }\n    for (let i = 0; i < ID_KEYS.length; i++) {\n      const k = ID_KEYS[i];\n      const id = item && item[k];\n      if (id && userMap[id]) return userMap[id];\n    }\n    const flat = (item && (item.userName || item.employeeName || item.assignedToName || item.createdByName)) || null;\n    if (flat) return flat;\n    return \"User\";\n  }\n\n  async function loadAll() {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const headers = { Authorization: \"Bearer \" + t };\n\n      const [shiftsRes, leavesRes, swapsRes, usersRes] = await Promise.all([\n        fetch(BASE + API.shifts.list, { headers }),\n        fetch(BASE + API.leaves.list, { headers }),\n        fetch(BASE + API.shifts.swapList, { headers }),\n        fetch(BASE + API.users.list, { headers }),\n      ]);\n\n      const [shifts, leaves, swaps, users] = await Promise.all([\n        readBody(shiftsRes),\n        readBody(leavesRes),\n        readBody(swapsRes),\n        readBody(usersRes),\n      ]);\n\n      setAllShifts(Array.isArray(shifts) ? shifts : []);\n      const leavesArr = Array.isArray(leaves) ? leaves : [];\n      setPendingLeaves(leavesArr.filter(function (l) {\n        return (l && l.status && String(l.status).toLowerCase() === \"pending\");\n      }));\n      setPendingSwaps(Array.isArray(swaps) ? swaps : []);\n      setAllUsers((Array.isArray(users) || (users && Array.isArray(users.users))) ? users : []);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  useEffect(function () {\n    loadAll();\n  }, []); // BASE normally static in CRA env; safe to omit\n\n  async function submitNewShift(e) {\n    e.preventDefault();\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(BASE + API.shifts.create, {\n        method: \"POST\",\n        headers: {\n          Authorization: \"Bearer \" + t,\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n        },\n        body: JSON.stringify({ userId: newShift.userId, date: newShift.date }),\n      });\n\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Assign shift failed:\", res.status, body);\n        alert((body && body.message) || (typeof body === \"string\" ? body : \"Failed to assign shift (HTTP \" + res.status + \")\"));\n        return;\n      }\n\n      setNewShift({ userId: \"\", date: \"\" });\n      await loadAll();\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to assign shift\");\n    }\n  }\n\n  async function approveLeave(id) {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(BASE + API.leaves.approveManager(id), {\n        method: \"PATCH\",\n        headers: { Authorization: \"Bearer \" + t },\n      });\n    const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve leave failed:\", res.status, body);\n        alert((body && body.message) || \"Failed to approve leave\");\n        return;\n      }\n      setPendingLeaves(function (prev) { return prev.filter(function (l) { return l._id !== id; }); });\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve leave\");\n    }\n  }\n\n  async function approveSwap(id) {\n    try {\n      const t = localStorage.getItem(\"token\");\n      const res = await fetch(BASE + API.shifts.approveSwap(id), {\n        method: \"PATCH\",\n        headers: { Authorization: \"Bearer \" + t },\n      });\n      const body = await readBody(res);\n      if (!res.ok) {\n        console.error(\"Approve swap failed:\", res.status, body);\n        alert((body && body.message) || \"Failed to approve swap\");\n        return;\n      }\n      setPendingSwaps(function (prev) { return prev.filter(function (s) { return s._id !== id; }); });\n    } catch (e) {\n      console.error(e);\n      alert(\"Failed to approve swap\");\n    }\n  }\n\n  return (\n    <div className=\"container py-3\">\n      <h2 className=\"mb-3 fw-bold\">Manager Dashboard</h2>\n\n      <div className=\"d-grid gap-3\">\n        {/* All Shifts */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">All Shifts</h3>\n          <ul className=\"list-unstyled d-grid gap-2\">\n            {allShifts.map(function (s, idx) {\n              const key = (s && s._id) ? s._id : \"shift-\" + idx;\n              return (\n                <li\n                  key={key}\n                  className=\"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\"\n                >\n                  <span>{displayName(s)} — {displayDate(s)}</span>\n                </li>\n              );\n            })}\n          </ul>\n        </section>\n\n        {/* Assign New Shift */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">Assign New Shift</h3>\n          <form className=\"row g-2\" onSubmit={submitNewShift}>\n            <div className=\"col-12 col-sm-6\">\n              <select\n                className=\"form-select\"\n                value={newShift.userId}\n                onChange={function (e) { setNewShift({ userId: e.target.value, date: newShift.date }); }}\n                required\n              >\n                <option value=\"\">Select user...</option>\n                {usersArray.map(function (u) {\n                  let label = (u && (u.name || u.fullName || u.username || u.email)) || \"User\";\n                  return (\n                    <option key={(u && (u._id || u.id)) || label}\n                            value={(u && (u._id || u.id)) || \"\"}>\n                      {label}\n                    </option>\n                  );\n                })}\n              </select>\n            </div>\n            <div className=\"col-12 col-sm-6\">\n              <input\n                type=\"date\"\n                className=\"form-control\"\n                value={newShift.date}\n                onChange={function (e) { setNewShift({ userId: newShift.userId, date: e.target.value }); }}\n                required\n              />\n            </div>\n            <div className=\"col-12 d-flex justify-content-end\">\n              <button type=\"submit\" className=\"btn btn-primary\">Assign Shift</button>\n            </div>\n          </form>\n        </section>\n\n        {/* Pending Leave Approvals */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">Pending Leave Approvals</h3>\n          <ul className=\"list-unstyled d-grid gap-2\">\n            {pendingLeaves.map(function (l) {\n              return (\n                <li\n                  key={l._id}\n                  className=\"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\"\n                >\n                  <span>\n                    {displayName(l)}: {(l?.startDate || \"\").toString().slice(0,10)} to {(l?.endDate || \"\").toString().slice(0,10)} — {l?.status}\n                  </span>\n                  <div className=\"d-flex gap-2\">\n                    <button className=\"btn btn-sm btn-primary\" onClick={function () { approveLeave(l._id); }}>\n                      Approve\n                    </button>\n                  </div>\n                </li>\n              );\n            })}\n          </ul>\n        </section>\n\n        {/* Pending Swap Approvals */}\n        <section className=\"card shadow-sm p-3\">\n          <h3 className=\"mb-3 text-primary fw-bold\">Pending Swap Approvals</h3>\n          <ul className=\"list-unstyled d-grid gap-2\">\n            {pendingSwaps.map(function (s) {\n              const initiatorName = s.initiator ? displayName(s.initiator) : displayName({ userId: s.initiatorId });\n              const targetName    = s.target    ? displayName(s.target)    : displayName({ userId: s.targetId });\n              const initDate = s.initiatorShift ? displayDate(s.initiatorShift) : \"\";\n              const targDate = s.targetShift    ? displayDate(s.targetShift)    : \"\";\n              return (\n                <li\n                  key={s._id}\n                  className=\"d-flex flex-wrap align-items-center justify-content-between gap-2 border rounded-3 p-2\"\n                >\n                  <span>\n                    Swap between {initiatorName} and {targetName} ({initDate}  &&  {targDate})\n                  </span>\n                  <div className=\"d-flex gap-2\">\n                    <button className=\"btn btn-sm btn-primary\" onClick={function () { approveSwap(s._id); }}>\n                      Approve\n                    </button>\n                  </div>\n                </li>\n              );\n            })}\n          </ul>\n        </section>\n      </div>\n    </div>\n  );\n}\n\nexport default ManagerDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}